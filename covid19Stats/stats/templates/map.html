{% extends 'base.html' %}

{% block content %}
    <div id="map_div" style="margin-top:5vh; width: 100%; height: 100%;"></div>
{% endblock %}

{% block script %}
    {% load static %}
    <script src="{% static "js/equivalent_countries.js" %}"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        let values = "{{ all_objects }}";
        values = values.split('&quot;').join('"');
        values = JSON.parse(values)
        console.log(values)


        values.splice(0, 0, ['Country', 'Total Cases', 'Total Deaths']);
        google.charts.load('current', {
            'packages':['geochart'],
            'mapsApiKey': 'AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY'
          });
          google.charts.setOnLoadCallback(drawRegionsMap);

          function drawRegionsMap() {
            var data = google.visualization.arrayToDataTable(values);

            var options = {
                backgroundColor: { fill:'transparent' },
                colorAxis: {colors: ['#F19CBB', '#FA8072', '#D21F3C', '#ff0000']},
                datalessRegionColor: '#FFFFFF',
                defaultColor: '#f5f5f5',
            };


            var chart = new google.visualization.GeoChart(document.getElementById('map_div'));

            chart.draw(data, options);
          }
    </script>
{% endblock %}